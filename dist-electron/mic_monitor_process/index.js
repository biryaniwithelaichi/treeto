"use strict";const o=require("path");require("node:events");require("electron");const a="Granola";function i(e){return a+` Helper (${e})`}process.title=i("MicMonitor");const t=process.argv[2];t==null&&(console.error("Mic activity process started with incorrect configuration."),process.abort());const n=require(t),s=new Set,p=new n.MicActivityTracker;console.log(`Starting mic activity tracker (pid: ${process.pid})`);p.start((e,r)=>{if(e!==null){console.error("Mic activity tracker failed to start: ",e);return}if(console.log("Received mic activity event: ",r),r.type==="default_device_changed")return;const c=m(r.processName);if(console.log("Bundle ID: ",c,r.processName),c!==void 0)switch(r.type){case"new_session":case"session_active":s.add(c);break;case"session_inactive":case"session_expired":s.delete(c);break}l()});process.on("disconnect",()=>{console.log("Parent process disconnected, exiting mic monitor process."),process.exit(0)});function m(e){switch(o.basename(e).toLowerCase()){case"chrome.exe":return"com.google.Chrome";case"firefox.exe":return"org.mozilla.firefox";case"zoom.exe":return"us.zoom.xos";case"slack.exe":return"com.tinyspeck.slackmacgap";case"arc.exe":return"company.thebrowser.Browser";case"webex.exe":return"com.cisco.webexmeetingsapp";case"ms-teams.exe":case"teams.exe":return"com.microsoft.teams2";case"safari.exe":return"com.apple.Safari";case"whatsapp.exe":return"net.whatsapp.WhatsApp";case"aircall.exe":case"aircall workspace.exe":return"io.aircall.phone";case"msedge.exe":return"com.microsoft.edgemac";case"voovmeetingapp.exe":return"com.tencent.tencentmeeting";case"tuple.exe":return"app.tuple.app";case"brave.exe":return"com.brave.Browser";case"discord.exe":return"com.hnc.Discord";case"comet.exe":return"ai.perplexity.comet";case"vivaldi.exe":return"com.vivaldi.Vivaldi";case"zen.exe":return"app.zen-browser.zen";case"dialpad.exe":return"com.electron.dialpad";case"dialpadmeetings.exe":return"com.electron.uberconference";case"gather.exe":return"com.gather.Gather";default:return}}function l(){if(process.parentPort){const e={event:"mic-apps-update",micApps:Array.from(s)};process.parentPort.postMessage(e)}}
//# sourceMappingURL=index.js.map
