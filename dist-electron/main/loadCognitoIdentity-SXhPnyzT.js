"use strict";var de=Object.defineProperty;var ce=(e,o,t)=>o in e?de(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var i=(e,o,t)=>ce(e,typeof o!="symbol"?o+"":o,t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("./index-B-kSrMS1.js"),_=require("./constants-Bo96U_V7.js"),E=require("./parse-utils-BXdb3Kaj.js"),Y=require("./object-mapping-CEgDDEsF.js"),pe=require("./date-utils-BE7p22zv.js"),le=async(e,o,t)=>({operation:n.getSmithyContext(o).operation,region:await n.normalizeProvider(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function ue(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(o,t)=>({signingProperties:{config:o,context:t}})}}function g(e){return{schemeId:"smithy.api#noAuth"}}const he=e=>{const o=[];switch(e.operation){case"GetCredentialsForIdentity":{o.push(g());break}case"GetId":{o.push(g());break}case"GetOpenIdToken":{o.push(g());break}case"UnlinkIdentity":{o.push(g());break}default:o.push(ue(e))}return o},ye=e=>{const o=n.resolveAwsSdkSigV4Config(e);return Object.assign(o,{authSchemePreference:n.normalizeProvider(e.authSchemePreference??[])})},me=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),X={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Ee="3.915.0",xe={version:Ee},Q="required",d="fn",c="argv",x="ref",U=!0,j="isSet",v="booleanEquals",m="error",u="endpoint",h="tree",b="PartitionResult",A="getAttr",C="stringEquals",M={[Q]:!1,type:"string"},q={[Q]:!0,default:!1,type:"boolean"},L={[x]:"Endpoint"},Z={[d]:v,[c]:[{[x]:"UseFIPS"},!0]},ee={[d]:v,[c]:[{[x]:"UseDualStack"},!0]},a={},P={[x]:"Region"},B={[d]:A,[c]:[{[x]:b},"supportsFIPS"]},te={[x]:b},V={[d]:v,[c]:[!0,{[d]:A,[c]:[te,"supportsDualStack"]}]},J=[Z],W=[ee],K=[P],Se={parameters:{Region:M,UseDualStack:q,UseFIPS:q,Endpoint:M},rules:[{conditions:[{[d]:j,[c]:[L]}],rules:[{conditions:J,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:m},{conditions:W,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:m},{endpoint:{url:L,properties:a,headers:a},type:u}],type:h},{conditions:[{[d]:j,[c]:K}],rules:[{conditions:[{[d]:"aws.partition",[c]:K,assign:b}],rules:[{conditions:[Z,ee],rules:[{conditions:[{[d]:v,[c]:[U,B]},V],rules:[{conditions:[{[d]:C,[c]:[P,"us-east-1"]}],endpoint:{url:"https://cognito-identity-fips.us-east-1.amazonaws.com",properties:a,headers:a},type:u},{conditions:[{[d]:C,[c]:[P,"us-east-2"]}],endpoint:{url:"https://cognito-identity-fips.us-east-2.amazonaws.com",properties:a,headers:a},type:u},{conditions:[{[d]:C,[c]:[P,"us-west-1"]}],endpoint:{url:"https://cognito-identity-fips.us-west-1.amazonaws.com",properties:a,headers:a},type:u},{conditions:[{[d]:C,[c]:[P,"us-west-2"]}],endpoint:{url:"https://cognito-identity-fips.us-west-2.amazonaws.com",properties:a,headers:a},type:u},{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},type:u}],type:h},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:m}],type:h},{conditions:J,rules:[{conditions:[{[d]:v,[c]:[B,U]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:a,headers:a},type:u}],type:h},{error:"FIPS is enabled but this partition does not support FIPS",type:m}],type:h},{conditions:W,rules:[{conditions:[V],rules:[{conditions:[{[d]:C,[c]:["aws",{[d]:A,[c]:[te,"name"]}]}],endpoint:{url:"https://cognito-identity.{Region}.amazonaws.com",properties:a,headers:a},type:u},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},type:u}],type:h},{error:"DualStack is enabled but this partition does not support DualStack",type:m}],type:h},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:a,headers:a},type:u}],type:h}],type:h},{error:"Invalid Configuration: Missing Region",type:m}]},Ie=Se,Ce=new n.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Pe=(e,o={})=>Ce.get(e,()=>n.resolveEndpoint(Ie,{endpointParams:e,logger:o.logger}));n.customEndpointFunctions.aws=n.awsEndpointFunctions;const ve=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??n.fromBase64,base64Encoder:(e==null?void 0:e.base64Encoder)??n.toBase64,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Pe,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??he,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4"),signer:new n.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new _.NoAuthSigner}],logger:(e==null?void 0:e.logger)??new n.NoOpLogger,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??n.parseUrl,utf8Decoder:(e==null?void 0:e.utf8Decoder)??n.fromUtf8,utf8Encoder:(e==null?void 0:e.utf8Encoder)??n.toUtf8}),we=e=>{n.emitWarningIfUnsupportedVersion(process.version);const o=n.resolveDefaultsModeConfig(e),t=()=>o().then(n.loadConfigsForDefaultMode),s=ve(e);n.emitWarningIfUnsupportedVersion$1(process.version);const r={profile:e==null?void 0:e.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:o,authSchemePreference:(e==null?void 0:e.authSchemePreference)??n.loadConfig(n.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,r),bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??n.calculateBodyLength,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??n.defaultProvider,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??n.createDefaultUserAgentProvider({serviceId:s.serviceId,clientVersion:xe.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??n.loadConfig(n.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:(e==null?void 0:e.region)??n.loadConfig(n.NODE_REGION_CONFIG_OPTIONS,{...n.NODE_REGION_CONFIG_FILE_OPTIONS,...r}),requestHandler:n.NodeHttpHandler.create((e==null?void 0:e.requestHandler)??t),retryMode:(e==null?void 0:e.retryMode)??n.loadConfig({...n.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await t()).retryMode||n.DEFAULT_RETRY_MODE},e),sha256:(e==null?void 0:e.sha256)??n.Hash.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??n.streamCollector,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??n.loadConfig(n.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,r),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??n.loadConfig(n.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,r),userAgentAppId:(e==null?void 0:e.userAgentAppId)??n.loadConfig(n.NODE_APP_ID_CONFIG_OPTIONS,r)}},ge=e=>{const o=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(r){const y=o.findIndex(S=>S.schemeId===r.schemeId);y===-1?o.push(r):o.splice(y,1,r)},httpAuthSchemes(){return o},setHttpAuthSchemeProvider(r){t=r},httpAuthSchemeProvider(){return t},setCredentials(r){s=r},credentials(){return s}}},_e=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Re=(e,o)=>{const t=Object.assign(n.getAwsRegionExtensionConfiguration(e),n.getDefaultExtensionConfiguration(e),n.getHttpHandlerExtensionConfiguration(e),ge(e));return o.forEach(s=>s.configure(t)),Object.assign(e,n.resolveAwsRegionExtensionConfiguration(t),n.resolveDefaultRuntimeConfig(t),n.resolveHttpHandlerRuntimeConfig(t),_e(t))};class be extends n.Client{constructor(...[t]){const s=we(t||{});super(s);i(this,"config");this.initConfig=s;const r=me(s),y=n.resolveUserAgentConfig(r),S=n.resolveRetryConfig(y),R=n.resolveRegionConfig(S),I=n.resolveHostHeaderConfig(R),w=n.resolveEndpointConfig(I),re=ye(w),ie=Re(re,(t==null?void 0:t.extensions)||[]);this.config=ie,this.middlewareStack.use(n.getUserAgentPlugin(this.config)),this.middlewareStack.use(n.getRetryPlugin(this.config)),this.middlewareStack.use(n.getContentLengthPlugin(this.config)),this.middlewareStack.use(n.getHostHeaderPlugin(this.config)),this.middlewareStack.use(n.getLoggerPlugin(this.config)),this.middlewareStack.use(n.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(n.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:le,identityProviderConfigProvider:async ae=>new n.DefaultIdentityProviderConfig({"aws.auth#sigv4":ae.credentials})})),this.middlewareStack.use(n.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}}class p extends n.ServiceException{constructor(o){super(o),Object.setPrototypeOf(this,p.prototype)}}class O extends p{constructor(t){super({name:"InternalErrorException",$fault:"server",...t});i(this,"name","InternalErrorException");i(this,"$fault","server");Object.setPrototypeOf(this,O.prototype)}}class N extends p{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t});i(this,"name","InvalidParameterException");i(this,"$fault","client");Object.setPrototypeOf(this,N.prototype)}}class D extends p{constructor(t){super({name:"LimitExceededException",$fault:"client",...t});i(this,"name","LimitExceededException");i(this,"$fault","client");Object.setPrototypeOf(this,D.prototype)}}class z extends p{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t});i(this,"name","NotAuthorizedException");i(this,"$fault","client");Object.setPrototypeOf(this,z.prototype)}}class F extends p{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t});i(this,"name","ResourceConflictException");i(this,"$fault","client");Object.setPrototypeOf(this,F.prototype)}}class f extends p{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t});i(this,"name","TooManyRequestsException");i(this,"$fault","client");Object.setPrototypeOf(this,f.prototype)}}class k extends p{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t});i(this,"name","ResourceNotFoundException");i(this,"$fault","client");Object.setPrototypeOf(this,k.prototype)}}class $ extends p{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t});i(this,"name","ExternalServiceException");i(this,"$fault","client");Object.setPrototypeOf(this,$.prototype)}}class T extends p{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t});i(this,"name","InvalidIdentityPoolConfigurationException");i(this,"$fault","client");Object.setPrototypeOf(this,T.prototype)}}class G extends p{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t});i(this,"name","DeveloperUserAlreadyRegisteredException");i(this,"$fault","client");Object.setPrototypeOf(this,G.prototype)}}class H extends p{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t});i(this,"name","ConcurrentModificationException");i(this,"$fault","client");Object.setPrototypeOf(this,H.prototype)}}const Ae=e=>({...e,...e.Logins&&{Logins:_.SENSITIVE_STRING}}),Oe=e=>({...e,...e.SecretKey&&{SecretKey:_.SENSITIVE_STRING}}),Ne=e=>({...e,...e.Credentials&&{Credentials:Oe(e.Credentials)}}),De=e=>({...e,...e.Logins&&{Logins:_.SENSITIVE_STRING}}),ze=async(e,o)=>{const t=se("GetCredentialsForIdentity");let s;return s=JSON.stringify(n._json(e)),oe(o,t,"/",void 0,s)},Fe=async(e,o)=>{const t=se("GetId");let s;return s=JSON.stringify(n._json(e)),oe(o,t,"/",void 0,s)},fe=async(e,o)=>{if(e.statusCode>=300)return ne(e,o);const t=await n.parseJsonBody(e.body,o);let s={};return s=We(t),{$metadata:l(e),...s}},ke=async(e,o)=>{if(e.statusCode>=300)return ne(e,o);const t=await n.parseJsonBody(e.body,o);let s={};return s=n._json(t),{$metadata:l(e),...s}},ne=async(e,o)=>{const t={...e,body:await n.parseJsonErrorBody(e.body,o)},s=n.loadRestJsonErrorCode(e,t.body);switch(s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await He(t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await je(t);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await Me(t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await qe(t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Le(t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await Ve(t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Be(t);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await Ge(t);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await Ue(t);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await Te(t);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await $e(t);default:const r=t.body;return Ke({output:e,parsedBody:r,errorCode:s})}},$e=async(e,o)=>{const t=e.body,s=n._json(t),r=new H({$metadata:l(e),...s});return n.decorateServiceException(r,t)},Te=async(e,o)=>{const t=e.body,s=n._json(t),r=new G({$metadata:l(e),...s});return n.decorateServiceException(r,t)},Ge=async(e,o)=>{const t=e.body,s=n._json(t),r=new $({$metadata:l(e),...s});return n.decorateServiceException(r,t)},He=async(e,o)=>{const t=e.body,s=n._json(t),r=new O({$metadata:l(e),...s});return n.decorateServiceException(r,t)},Ue=async(e,o)=>{const t=e.body,s=n._json(t),r=new T({$metadata:l(e),...s});return n.decorateServiceException(r,t)},je=async(e,o)=>{const t=e.body,s=n._json(t),r=new N({$metadata:l(e),...s});return n.decorateServiceException(r,t)},Me=async(e,o)=>{const t=e.body,s=n._json(t),r=new D({$metadata:l(e),...s});return n.decorateServiceException(r,t)},qe=async(e,o)=>{const t=e.body,s=n._json(t),r=new z({$metadata:l(e),...s});return n.decorateServiceException(r,t)},Le=async(e,o)=>{const t=e.body,s=n._json(t),r=new F({$metadata:l(e),...s});return n.decorateServiceException(r,t)},Be=async(e,o)=>{const t=e.body,s=n._json(t),r=new k({$metadata:l(e),...s});return n.decorateServiceException(r,t)},Ve=async(e,o)=>{const t=e.body,s=n._json(t),r=new f({$metadata:l(e),...s});return n.decorateServiceException(r,t)},Je=(e,o)=>Y.take(e,{AccessKeyId:E.expectString,Expiration:t=>E.expectNonNull(pe.parseEpochTimestamp(E.expectNumber(t))),SecretKey:E.expectString,SessionToken:E.expectString}),We=(e,o)=>Y.take(e,{Credentials:t=>Je(t),IdentityId:E.expectString}),l=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Ke=n.withBaseException(p),oe=async(e,o,t,s,r)=>{const{hostname:y,protocol:S="https",port:R,path:I}=await e.endpoint(),w={protocol:S,hostname:y,port:R,method:"POST",path:I.endsWith("/")?I.slice(0,-1)+t:I+t,headers:o};return r!==void 0&&(w.body=r),new n.HttpRequest(w)};function se(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class Ye extends n.Command.classBuilder().ep(X).m(function(o,t,s,r){return[n.getSerdePlugin(s,this.serialize,this.deserialize),n.getEndpointPlugin(s,o.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(Ae,Ne).ser(ze).de(fe).build(){}class Xe extends n.Command.classBuilder().ep(X).m(function(o,t,s,r){return[n.getSerdePlugin(s,this.serialize,this.deserialize),n.getEndpointPlugin(s,o.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(De,void 0).ser(Fe).de(ke).build(){}exports.CognitoIdentityClient=be;exports.GetCredentialsForIdentityCommand=Ye;exports.GetIdCommand=Xe;
//# sourceMappingURL=loadCognitoIdentity-SXhPnyzT.js.map
