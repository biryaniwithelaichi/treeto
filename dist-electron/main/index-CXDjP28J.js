"use strict";var oe=Object.defineProperty;var se=(e,r,t)=>r in e?oe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var o=(e,r,t)=>se(e,typeof r!="symbol"?r+"":r,t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("./index-B-kSrMS1.js"),U=require("./package-B1VDrMSc.js"),E=require("./constants-Bo96U_V7.js"),d=require("./object-mapping-CEgDDEsF.js"),c=require("./parse-utils-BXdb3Kaj.js"),ie=(e,r,t,i,s,a)=>{if(r!=null&&r[t]!==void 0){const m=i();if(m.length<=0)throw new Error("Empty value provided for input HTTP label: "+t+".");e=e.replace(s,a?m.split("/").map(N=>U.extendedEncodeURIComponent(N)).join("/"):U.extendedEncodeURIComponent(m))}else throw new Error("No value provided for input HTTP label: "+t+".");return e};function ae(e,r){return new ce(e,r)}class ce{constructor(r,t){o(this,"input");o(this,"context");o(this,"query",{});o(this,"method","");o(this,"headers",{});o(this,"path","");o(this,"body",null);o(this,"hostname","");o(this,"resolvePathStack",[]);this.input=r,this.context=t}async build(){const{hostname:r,protocol:t="https",port:i,path:s}=await this.context.endpoint();this.path=s;for(const a of this.resolvePathStack)a(this.path);return new n.HttpRequest({protocol:t,hostname:this.hostname||r,port:i,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(r){return this.hostname=r,this}bp(r){return this.resolvePathStack.push(t=>{this.path=`${t!=null&&t.endsWith("/")?t.slice(0,-1):t||""}`+r}),this}p(r,t,i,s){return this.resolvePathStack.push(a=>{this.path=ie(a,this.input,r,t,i,s)}),this}h(r){return this.headers=r,this}q(r){return this.query=r,this}b(r){return this.body=r,this}m(r){return this.method=r,this}}const de=async(e,r,t)=>({operation:n.getSmithyContext(r).operation,region:await n.normalizeProvider(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function pe(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(r,t)=>({signingProperties:{config:r,context:t}})}}function le(e){return{schemeId:"smithy.api#noAuth"}}const ue=e=>{const r=[];switch(e.operation){case"CreateToken":{r.push(le());break}default:r.push(pe(e))}return r},he=e=>{const r=n.resolveAwsSdkSigV4Config(e);return Object.assign(r,{authSchemePreference:n.normalizeProvider(e.authSchemePreference??[])})},Se=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),xe={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},J="required",u="fn",h="argv",v="ref",f=!0,q="isSet",_="booleanEquals",y="error",I="endpoint",x="tree",$="PartitionResult",z="getAttr",F={[J]:!1,type:"String"},H={[J]:!0,default:!1,type:"Boolean"},j={[v]:"Endpoint"},W={[u]:_,[h]:[{[v]:"UseFIPS"},!0]},Y={[u]:_,[h]:[{[v]:"UseDualStack"},!0]},l={},G={[u]:z,[h]:[{[v]:$},"supportsFIPS"]},K={[v]:$},V={[u]:_,[h]:[!0,{[u]:z,[h]:[K,"supportsDualStack"]}]},M=[W],L=[Y],B=[{[v]:"Region"}],me={parameters:{Region:F,UseDualStack:H,UseFIPS:H,Endpoint:F},rules:[{conditions:[{[u]:q,[h]:[j]}],rules:[{conditions:M,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:y},{conditions:L,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:y},{endpoint:{url:j,properties:l,headers:l},type:I}],type:x},{conditions:[{[u]:q,[h]:B}],rules:[{conditions:[{[u]:"aws.partition",[h]:B,assign:$}],rules:[{conditions:[W,Y],rules:[{conditions:[{[u]:_,[h]:[f,G]},V],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:l,headers:l},type:I}],type:x},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:y}],type:x},{conditions:M,rules:[{conditions:[{[u]:_,[h]:[G,f]}],rules:[{conditions:[{[u]:"stringEquals",[h]:[{[u]:z,[h]:[K,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:l,headers:l},type:I},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:l,headers:l},type:I}],type:x},{error:"FIPS is enabled but this partition does not support FIPS",type:y}],type:x},{conditions:L,rules:[{conditions:[V],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:l,headers:l},type:I}],type:x},{error:"DualStack is enabled but this partition does not support DualStack",type:y}],type:x},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:l,headers:l},type:I}],type:x}],type:x},{error:"Invalid Configuration: Missing Region",type:y}]},Ee=me,ye=new n.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Ie=(e,r={})=>ye.get(e,()=>n.resolveEndpoint(Ee,{endpointParams:e,logger:r.logger}));n.customEndpointFunctions.aws=n.awsEndpointFunctions;const ve=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??n.fromBase64,base64Encoder:(e==null?void 0:e.base64Encoder)??n.toBase64,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Ie,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??ue,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:r=>r.getIdentityProvider("aws.auth#sigv4"),signer:new n.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:r=>r.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new E.NoAuthSigner}],logger:(e==null?void 0:e.logger)??new n.NoOpLogger,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??n.parseUrl,utf8Decoder:(e==null?void 0:e.utf8Decoder)??n.fromUtf8,utf8Encoder:(e==null?void 0:e.utf8Encoder)??n.toUtf8}),_e=e=>{n.emitWarningIfUnsupportedVersion(process.version);const r=n.resolveDefaultsModeConfig(e),t=()=>r().then(n.loadConfigsForDefaultMode),i=ve(e);n.emitWarningIfUnsupportedVersion$1(process.version);const s={profile:e==null?void 0:e.profile,logger:i.logger};return{...i,...e,runtime:"node",defaultsMode:r,authSchemePreference:(e==null?void 0:e.authSchemePreference)??n.loadConfig(n.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??n.calculateBodyLength,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??n.createDefaultUserAgentProvider({serviceId:i.serviceId,clientVersion:U.packageInfo.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??n.loadConfig(n.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:(e==null?void 0:e.region)??n.loadConfig(n.NODE_REGION_CONFIG_OPTIONS,{...n.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:n.NodeHttpHandler.create((e==null?void 0:e.requestHandler)??t),retryMode:(e==null?void 0:e.retryMode)??n.loadConfig({...n.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await t()).retryMode||n.DEFAULT_RETRY_MODE},e),sha256:(e==null?void 0:e.sha256)??n.Hash.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??n.streamCollector,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??n.loadConfig(n.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??n.loadConfig(n.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:(e==null?void 0:e.userAgentAppId)??n.loadConfig(n.NODE_APP_ID_CONFIG_OPTIONS,s)}},Pe=e=>{const r=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,i=e.credentials;return{setHttpAuthScheme(s){const a=r.findIndex(m=>m.schemeId===s.schemeId);a===-1?r.push(s):r.splice(a,1,s)},httpAuthSchemes(){return r},setHttpAuthSchemeProvider(s){t=s},httpAuthSchemeProvider(){return t},setCredentials(s){i=s},credentials(){return i}}},Ce=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),we=(e,r)=>{const t=Object.assign(n.getAwsRegionExtensionConfiguration(e),n.getDefaultExtensionConfiguration(e),n.getHttpHandlerExtensionConfiguration(e),Pe(e));return r.forEach(i=>i.configure(t)),Object.assign(e,n.resolveAwsRegionExtensionConfiguration(t),n.resolveDefaultRuntimeConfig(t),n.resolveHttpHandlerRuntimeConfig(t),Ce(t))};class be extends n.Client{constructor(...[t]){const i=_e(t||{});super(i);o(this,"config");this.initConfig=i;const s=Se(i),a=n.resolveUserAgentConfig(s),m=n.resolveRetryConfig(a),N=n.resolveRegionConfig(m),Z=n.resolveHostHeaderConfig(N),ee=n.resolveEndpointConfig(Z),te=he(ee),re=we(te,(t==null?void 0:t.extensions)||[]);this.config=re,this.middlewareStack.use(n.getUserAgentPlugin(this.config)),this.middlewareStack.use(n.getRetryPlugin(this.config)),this.middlewareStack.use(n.getContentLengthPlugin(this.config)),this.middlewareStack.use(n.getHostHeaderPlugin(this.config)),this.middlewareStack.use(n.getLoggerPlugin(this.config)),this.middlewareStack.use(n.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(n.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:de,identityProviderConfigProvider:async ne=>new n.DefaultIdentityProviderConfig({"aws.auth#sigv4":ne.credentials})})),this.middlewareStack.use(n.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}}class p extends n.ServiceException{constructor(r){super(r),Object.setPrototypeOf(this,p.prototype)}}class P extends p{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t});o(this,"name","AccessDeniedException");o(this,"$fault","client");o(this,"error");o(this,"reason");o(this,"error_description");Object.setPrototypeOf(this,P.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}}class C extends p{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t});o(this,"name","AuthorizationPendingException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,C.prototype),this.error=t.error,this.error_description=t.error_description}}const X=e=>({...e,...e.clientSecret&&{clientSecret:E.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:E.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:E.SENSITIVE_STRING}}),Q=e=>({...e,...e.accessToken&&{accessToken:E.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:E.SENSITIVE_STRING},...e.idToken&&{idToken:E.SENSITIVE_STRING}});class w extends p{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t});o(this,"name","ExpiredTokenException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,w.prototype),this.error=t.error,this.error_description=t.error_description}}class b extends p{constructor(t){super({name:"InternalServerException",$fault:"server",...t});o(this,"name","InternalServerException");o(this,"$fault","server");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,b.prototype),this.error=t.error,this.error_description=t.error_description}}class g extends p{constructor(t){super({name:"InvalidClientException",$fault:"client",...t});o(this,"name","InvalidClientException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,g.prototype),this.error=t.error,this.error_description=t.error_description}}class k extends p{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t});o(this,"name","InvalidGrantException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,k.prototype),this.error=t.error,this.error_description=t.error_description}}class O extends p{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t});o(this,"name","InvalidRequestException");o(this,"$fault","client");o(this,"error");o(this,"reason");o(this,"error_description");Object.setPrototypeOf(this,O.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}}class T extends p{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t});o(this,"name","InvalidScopeException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,T.prototype),this.error=t.error,this.error_description=t.error_description}}class R extends p{constructor(t){super({name:"SlowDownException",$fault:"client",...t});o(this,"name","SlowDownException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,R.prototype),this.error=t.error,this.error_description=t.error_description}}class A extends p{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t});o(this,"name","UnauthorizedClientException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,A.prototype),this.error=t.error,this.error_description=t.error_description}}class D extends p{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t});o(this,"name","UnsupportedGrantTypeException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,D.prototype),this.error=t.error,this.error_description=t.error_description}}const ge=async(e,r)=>{const t=ae(e,r),i={"content-type":"application/json"};t.bp("/token");let s;return s=JSON.stringify(d.take(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:a=>n._json(a)})),t.m("POST").h(i).b(s),t.build()},ke=async(e,r)=>{if(e.statusCode!==200&&e.statusCode>=300)return Oe(e,r);const t=d.map({$metadata:S(e)}),i=c.expectNonNull(c.expectObject(await n.parseJsonBody(e.body,r)),"body"),s=d.take(i,{accessToken:c.expectString,expiresIn:c.expectInt32,idToken:c.expectString,refreshToken:c.expectString,tokenType:c.expectString});return Object.assign(t,s),t},Oe=async(e,r)=>{const t={...e,body:await n.parseJsonErrorBody(e.body,r)},i=n.loadRestJsonErrorCode(e,t.body);switch(i){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await Re(t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await Ae(t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await De(t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Ne(t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Ue(t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await $e(t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await ze(t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await fe(t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await qe(t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await Fe(t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await He(t);default:const s=t.body;return Te({output:e,parsedBody:s,errorCode:i})}},Te=n.withBaseException(p),Re=async(e,r)=>{const t=d.map({}),i=e.body,s=d.take(i,{error:c.expectString,error_description:c.expectString,reason:c.expectString});Object.assign(t,s);const a=new P({$metadata:S(e),...t});return n.decorateServiceException(a,e.body)},Ae=async(e,r)=>{const t=d.map({}),i=e.body,s=d.take(i,{error:c.expectString,error_description:c.expectString});Object.assign(t,s);const a=new C({$metadata:S(e),...t});return n.decorateServiceException(a,e.body)},De=async(e,r)=>{const t=d.map({}),i=e.body,s=d.take(i,{error:c.expectString,error_description:c.expectString});Object.assign(t,s);const a=new w({$metadata:S(e),...t});return n.decorateServiceException(a,e.body)},Ne=async(e,r)=>{const t=d.map({}),i=e.body,s=d.take(i,{error:c.expectString,error_description:c.expectString});Object.assign(t,s);const a=new b({$metadata:S(e),...t});return n.decorateServiceException(a,e.body)},Ue=async(e,r)=>{const t=d.map({}),i=e.body,s=d.take(i,{error:c.expectString,error_description:c.expectString});Object.assign(t,s);const a=new g({$metadata:S(e),...t});return n.decorateServiceException(a,e.body)},$e=async(e,r)=>{const t=d.map({}),i=e.body,s=d.take(i,{error:c.expectString,error_description:c.expectString});Object.assign(t,s);const a=new k({$metadata:S(e),...t});return n.decorateServiceException(a,e.body)},ze=async(e,r)=>{const t=d.map({}),i=e.body,s=d.take(i,{error:c.expectString,error_description:c.expectString,reason:c.expectString});Object.assign(t,s);const a=new O({$metadata:S(e),...t});return n.decorateServiceException(a,e.body)},fe=async(e,r)=>{const t=d.map({}),i=e.body,s=d.take(i,{error:c.expectString,error_description:c.expectString});Object.assign(t,s);const a=new T({$metadata:S(e),...t});return n.decorateServiceException(a,e.body)},qe=async(e,r)=>{const t=d.map({}),i=e.body,s=d.take(i,{error:c.expectString,error_description:c.expectString});Object.assign(t,s);const a=new R({$metadata:S(e),...t});return n.decorateServiceException(a,e.body)},Fe=async(e,r)=>{const t=d.map({}),i=e.body,s=d.take(i,{error:c.expectString,error_description:c.expectString});Object.assign(t,s);const a=new A({$metadata:S(e),...t});return n.decorateServiceException(a,e.body)},He=async(e,r)=>{const t=d.map({}),i=e.body,s=d.take(i,{error:c.expectString,error_description:c.expectString});Object.assign(t,s);const a=new D({$metadata:S(e),...t});return n.decorateServiceException(a,e.body)},S=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});class je extends n.Command.classBuilder().ep(xe).m(function(r,t,i,s){return[n.getSerdePlugin(i,this.serialize,this.deserialize),n.getEndpointPlugin(i,r.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(X,Q).ser(ge).de(ke).build(){}exports.$Command=n.Command;exports.__Client=n.Client;exports.AccessDeniedException=P;exports.AuthorizationPendingException=C;exports.CreateTokenCommand=je;exports.CreateTokenRequestFilterSensitiveLog=X;exports.CreateTokenResponseFilterSensitiveLog=Q;exports.ExpiredTokenException=w;exports.InternalServerException=b;exports.InvalidClientException=g;exports.InvalidGrantException=k;exports.InvalidRequestException=O;exports.InvalidScopeException=T;exports.SSOOIDCClient=be;exports.SSOOIDCServiceException=p;exports.SlowDownException=R;exports.UnauthorizedClientException=A;exports.UnsupportedGrantTypeException=D;
//# sourceMappingURL=index-CXDjP28J.js.map
